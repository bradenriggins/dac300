<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Career Roadmap - RDA Journey</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e8f0f8 100%);
            color: #1e293b;
            line-height: 1.6;
            padding: 2rem 1rem;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 3px solid #01549e;
        }

        .header h1 {
            color: #01549e;
            font-size: 2.25rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .header p {
            color: #64748b;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Progress Bar */
        .progress-container {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .progress-label h2 {
            color: #01549e;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .progress-percentage {
            color: #cb6015;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .progress-bar {
            width: 100%;
            height: 24px;
            background: #e2e8f0;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #01549e 0%, #507ABB 100%);
            border-radius: 12px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 0.5rem;
        }

        /* Visual Roadmap */
        .visual-roadmap {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow-x: auto;
        }

        .roadmap-path {
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            min-width: 600px;
            padding: 1rem 0;
        }

        .roadmap-line {
            position: absolute;
            top: 50%;
            left: 5%;
            right: 5%;
            height: 4px;
            background: #e2e8f0;
            z-index: 1;
        }

        .roadmap-line-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #01549e 0%, #cb6015 100%);
            transition: width 0.5s ease;
        }

        .milestone {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }

        .milestone-marker {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: white;
            border: 4px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            color: #94a3b8;
            transition: all 0.3s ease;
            margin-bottom: 0.5rem;
        }

        .milestone-marker.completed {
            background: linear-gradient(135deg, #01549e 0%, #507ABB 100%);
            border-color: #01549e;
            color: white;
        }

        .milestone-marker.active {
            background: linear-gradient(135deg, #cb6015 0%, #be5510 100%);
            border-color: #cb6015;
            color: white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(203, 96, 21, 0.4);
            }
            50% {
                box-shadow: 0 0 0 12px rgba(203, 96, 21, 0);
            }
        }

        .milestone-label {
            text-align: center;
            font-size: 0.8rem;
            font-weight: 600;
            color: #64748b;
            max-width: 100px;
        }

        .milestone-label.completed {
            color: #01549e;
        }

        .milestone-label.active {
            color: #cb6015;
        }

        /* Section Card */
        .section-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .section-card.completed {
            border-left-color: #01549e;
        }

        .section-card.active {
            border-left-color: #cb6015;
            box-shadow: 0 4px 16px rgba(203, 96, 21, 0.15);
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            gap: 1rem;
        }

        .section-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(135deg, #01549e 0%, #507ABB 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .section-title-group {
            flex: 1;
        }

        .section-title {
            color: #01549e;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .section-subtitle {
            color: #64748b;
            font-size: 0.95rem;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            color: #334155;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .required {
            color: #cb6015;
            margin-left: 0.25rem;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.2s ease;
            background: #f8fafc;
        }

        input[type="text"]:focus,
        textarea:focus {
            outline: none;
            border-color: #507ABB;
            background: white;
            box-shadow: 0 0 0 3px rgba(80, 122, 187, 0.1);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .help-text {
            font-size: 0.875rem;
            color: #64748b;
            margin-top: 0.25rem;
            font-style: italic;
        }

        /* Action Steps */
        .action-steps {
            margin-top: 1rem;
        }

        .action-step {
            display: flex;
            gap: 0.75rem;
            align-items: start;
            padding: 0.75rem;
            background: #f8fafc;
            border-radius: 8px;
            margin-bottom: 0.75rem;
            border: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .action-step:focus-within {
            border-color: #507ABB;
            background: white;
        }

        .action-step-number {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #507ABB;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink: 0;
            margin-top: 0.1rem;
        }

        .action-step input {
            flex: 1;
            background: transparent;
            border: none;
            padding: 0.5rem;
            font-size: 0.95rem;
        }

        .action-step input:focus {
            box-shadow: none;
        }

        /* Two Column Layout */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        @media (max-width: 640px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #e2e8f0;
        }

        .btn {
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            font-family: inherit;
        }

        .btn:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(80, 122, 187, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #01549e 0%, #507ABB 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(1, 84, 158, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #cb6015 0%, #be5510 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(203, 96, 21, 0.3);
        }

        .btn-outline {
            background: white;
            color: #01549e;
            border: 2px solid #01549e;
        }

        .btn-outline:hover {
            background: #f8fafc;
        }

        .btn-danger {
            background: white;
            color: #dc2626;
            border: 2px solid #dc2626;
        }

        .btn-danger:hover {
            background: #fef2f2;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            margin-bottom: 1rem;
        }

        .modal-header h2 {
            color: #01549e;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .modal-body {
            margin-bottom: 1.5rem;
            color: #64748b;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        /* Success Message */
        .success-message {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: #10b981;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            z-index: 1001;
            display: none;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .success-message.active {
            display: flex;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                padding: 0;
            }

            .action-buttons,
            .btn {
                display: none !important;
            }

            .section-card {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #e2e8f0;
            }

            .visual-roadmap {
                page-break-inside: avoid;
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        *:focus-visible {
            outline: 3px solid #507ABB;
            outline-offset: 2px;
        }

        /* Auto-save Indicator */
        .autosave-indicator {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 0.75rem 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            color: #64748b;
            font-size: 0.875rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 100;
        }

        .autosave-indicator.active {
            opacity: 1;
        }

        /* Mobile Responsive */
        @media (max-width: 640px) {
            body {
                padding: 1rem 0.5rem;
            }

            .header h1 {
                font-size: 1.75rem;
            }

            .header p {
                font-size: 1rem;
            }

            .section-card {
                padding: 1.5rem;
            }

            .section-title {
                font-size: 1.25rem;
            }

            .visual-roadmap {
                padding: 1rem;
            }

            .milestone-marker {
                width: 36px;
                height: 36px;
                font-size: 0.9rem;
            }

            .milestone-label {
                font-size: 0.7rem;
                max-width: 80px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .success-message {
                top: 1rem;
                right: 1rem;
                left: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>My Career Roadmap</h1>
            <p>Chart your journey from RDA certification to your dream career in dental assisting</p>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container" role="region" aria-label="Overall progress">
            <div class="progress-label">
                <h2>Your Progress</h2>
                <span class="progress-percentage" id="progressPercentage" aria-live="polite">0%</span>
            </div>
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- Visual Roadmap -->
        <div class="visual-roadmap" role="region" aria-label="Career roadmap visualization">
            <div class="roadmap-path">
                <div class="roadmap-line">
                    <div class="roadmap-line-progress" id="roadmapProgress"></div>
                </div>

                <div class="milestone" data-milestone="start">
                    <div class="milestone-marker" id="marker-start">
                        <span aria-hidden="true">&#x1F4CD;</span>
                    </div>
                    <div class="milestone-label">Starting Point</div>
                </div>

                <div class="milestone" data-milestone="mile1">
                    <div class="milestone-marker" id="marker-mile1">1</div>
                    <div class="milestone-label">3 Months</div>
                </div>

                <div class="milestone" data-milestone="mile2">
                    <div class="milestone-marker" id="marker-mile2">2</div>
                    <div class="milestone-label">1 Year</div>
                </div>

                <div class="milestone" data-milestone="mile3">
                    <div class="milestone-marker" id="marker-mile3">3</div>
                    <div class="milestone-label">3 Years</div>
                </div>

                <div class="milestone" data-milestone="destination">
                    <div class="milestone-marker" id="marker-destination">
                        <span aria-hidden="true">&#x1F3C6;</span>
                    </div>
                    <div class="milestone-label">5+ Years</div>
                </div>
            </div>
        </div>

        <!-- Starting Point Section -->
        <section class="section-card" id="section-start" data-section="start">
            <div class="section-header">
                <div class="section-icon" aria-hidden="true">&#x1F4CD;</div>
                <div class="section-title-group">
                    <h2 class="section-title">Starting Point</h2>
                    <p class="section-subtitle">Where you are today</p>
                </div>
            </div>

            <div class="form-group">
                <label for="start-externship">
                    Where are you in your externship?
                    <span class="required" aria-label="required">*</span>
                </label>
                <textarea
                    id="start-externship"
                    placeholder="Example: I'm halfway through my externship at a general practice. I've learned basic chairside assisting and am getting comfortable with instrument passing..."
                    aria-required="true"
                    data-section="start"
                ></textarea>
                <p class="help-text">Describe your current status and what you've accomplished so far</p>
            </div>

            <div class="form-group">
                <label for="start-skills">
                    What are your current skills and strengths?
                    <span class="required" aria-label="required">*</span>
                </label>
                <textarea
                    id="start-skills"
                    placeholder="Example: I'm good at making patients feel comfortable, I learn quickly, I'm organized and detail-oriented..."
                    aria-required="true"
                    data-section="start"
                ></textarea>
                <p class="help-text">List your strongest skills and natural abilities</p>
            </div>

            <div class="form-group">
                <label for="start-interests">
                    What interests you most about dental assisting?
                    <span class="required" aria-label="required">*</span>
                </label>
                <textarea
                    id="start-interests"
                    placeholder="Example: I love the patient interaction and the variety of procedures. I'm especially interested in orthodontics and pediatric dentistry..."
                    aria-required="true"
                    data-section="start"
                ></textarea>
                <p class="help-text">What aspects of dental assisting excite you most?</p>
            </div>
        </section>

        <!-- Mile Marker 1: 3 Months -->
        <section class="section-card" id="section-mile1" data-section="mile1">
            <div class="section-header">
                <div class="section-icon" aria-hidden="true">1</div>
                <div class="section-title-group">
                    <h2 class="section-title">Mile Marker 1: 3 Months</h2>
                    <p class="section-subtitle">RDA certification and immediate goals</p>
                </div>
            </div>

            <div class="form-group">
                <label for="mile1-goal">
                    My primary goal for this milestone
                    <span class="required" aria-label="required">*</span>
                </label>
                <input
                    type="text"
                    id="mile1-goal"
                    placeholder="Example: Pass my RDA exam on the first attempt and secure a position at a family dental practice"
                    aria-required="true"
                    data-section="mile1"
                />
            </div>

            <div class="form-group">
                <label>Action steps to achieve this goal</label>
                <div class="action-steps">
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">1</div>
                        <input
                            type="text"
                            id="mile1-action1"
                            placeholder="Example: Complete RDA exam prep course and study 2 hours daily"
                            aria-label="Action step 1"
                            data-section="mile1"
                        />
                    </div>
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">2</div>
                        <input
                            type="text"
                            id="mile1-action2"
                            placeholder="Example: Update resume and start networking with dental offices"
                            aria-label="Action step 2"
                            data-section="mile1"
                        />
                    </div>
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">3</div>
                        <input
                            type="text"
                            id="mile1-action3"
                            placeholder="Example: Practice clinical skills weekly with study partner"
                            aria-label="Action step 3"
                            data-section="mile1"
                        />
                    </div>
                </div>
            </div>

            <div class="two-column">
                <div class="form-group">
                    <label for="mile1-resources">Resources and support needed</label>
                    <textarea
                        id="mile1-resources"
                        placeholder="Example: RDA study materials, practice exams, mentor for questions, financial support for exam fees..."
                        data-section="mile1"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="mile1-obstacles">Potential obstacles and solutions</label>
                    <textarea
                        id="mile1-obstacles"
                        placeholder="Example: Test anxiety - solution: take practice exams under timed conditions, use relaxation techniques..."
                        data-section="mile1"
                    ></textarea>
                </div>
            </div>
        </section>

        <!-- Mile Marker 2: 1 Year -->
        <section class="section-card" id="section-mile2" data-section="mile2">
            <div class="section-header">
                <div class="section-icon" aria-hidden="true">2</div>
                <div class="section-title-group">
                    <h2 class="section-title">Mile Marker 2: 1 Year</h2>
                    <p class="section-subtitle">First job and gaining experience</p>
                </div>
            </div>

            <div class="form-group">
                <label for="mile2-goal">
                    My primary goal for this milestone
                    <span class="required" aria-label="required">*</span>
                </label>
                <input
                    type="text"
                    id="mile2-goal"
                    placeholder="Example: Excel in my first RDA position and complete additional certification in radiology"
                    aria-required="true"
                    data-section="mile2"
                />
            </div>

            <div class="form-group">
                <label>Action steps to achieve this goal</label>
                <div class="action-steps">
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">1</div>
                        <input
                            type="text"
                            id="mile2-action1"
                            placeholder="Example: Master all chairside procedures and expand into advanced procedures"
                            aria-label="Action step 1"
                            data-section="mile2"
                        />
                    </div>
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">2</div>
                        <input
                            type="text"
                            id="mile2-action2"
                            placeholder="Example: Enroll in radiology certification course"
                            aria-label="Action step 2"
                            data-section="mile2"
                        />
                    </div>
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">3</div>
                        <input
                            type="text"
                            id="mile2-action3"
                            placeholder="Example: Build strong relationships with team and seek mentorship"
                            aria-label="Action step 3"
                            data-section="mile2"
                        />
                    </div>
                </div>
            </div>

            <div class="two-column">
                <div class="form-group">
                    <label for="mile2-resources">Resources and support needed</label>
                    <textarea
                        id="mile2-resources"
                        placeholder="Example: Continuing education budget, supportive team environment, mentor for career guidance..."
                        data-section="mile2"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="mile2-obstacles">Potential obstacles and solutions</label>
                    <textarea
                        id="mile2-obstacles"
                        placeholder="Example: Overwhelm with new responsibilities - solution: ask questions, take notes, create checklists..."
                        data-section="mile2"
                    ></textarea>
                </div>
            </div>
        </section>

        <!-- Mile Marker 3: 3 Years -->
        <section class="section-card" id="section-mile3" data-section="mile3">
            <div class="section-header">
                <div class="section-icon" aria-hidden="true">3</div>
                <div class="section-title-group">
                    <h2 class="section-title">Mile Marker 3: 3 Years</h2>
                    <p class="section-subtitle">Career development and specialization</p>
                </div>
            </div>

            <div class="form-group">
                <label for="mile3-goal">
                    My primary goal for this milestone
                    <span class="required" aria-label="required">*</span>
                </label>
                <input
                    type="text"
                    id="mile3-goal"
                    placeholder="Example: Become lead dental assistant and specialize in orthodontics or oral surgery"
                    aria-required="true"
                    data-section="mile3"
                />
            </div>

            <div class="form-group">
                <label>Action steps to achieve this goal</label>
                <div class="action-steps">
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">1</div>
                        <input
                            type="text"
                            id="mile3-action1"
                            placeholder="Example: Pursue advanced certification in specialty area"
                            aria-label="Action step 1"
                            data-section="mile3"
                        />
                    </div>
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">2</div>
                        <input
                            type="text"
                            id="mile3-action2"
                            placeholder="Example: Take on leadership roles and mentor new assistants"
                            aria-label="Action step 2"
                            data-section="mile3"
                        />
                    </div>
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">3</div>
                        <input
                            type="text"
                            id="mile3-action3"
                            placeholder="Example: Join professional organizations and attend conferences"
                            aria-label="Action step 3"
                            data-section="mile3"
                        />
                    </div>
                </div>
            </div>

            <div class="two-column">
                <div class="form-group">
                    <label for="mile3-resources">Resources and support needed</label>
                    <textarea
                        id="mile3-resources"
                        placeholder="Example: Specialty training programs, leadership development, professional memberships..."
                        data-section="mile3"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="mile3-obstacles">Potential obstacles and solutions</label>
                    <textarea
                        id="mile3-obstacles"
                        placeholder="Example: Limited specialty positions available - solution: network actively, consider relocating, build diverse skills..."
                        data-section="mile3"
                    ></textarea>
                </div>
            </div>
        </section>

        <!-- Destination: 5+ Years -->
        <section class="section-card" id="section-destination" data-section="destination">
            <div class="section-header">
                <div class="section-icon" aria-hidden="true">&#x1F3C6;</div>
                <div class="section-title-group">
                    <h2 class="section-title">Destination: 5+ Years</h2>
                    <p class="section-subtitle">Your long-term vision</p>
                </div>
            </div>

            <div class="form-group">
                <label for="destination-goal">
                    My long-term career vision
                    <span class="required" aria-label="required">*</span>
                </label>
                <input
                    type="text"
                    id="destination-goal"
                    placeholder="Example: Own and operate my own dental practice or become an RDA program instructor"
                    aria-required="true"
                    data-section="destination"
                />
            </div>

            <div class="form-group">
                <label>Action steps to achieve this goal</label>
                <div class="action-steps">
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">1</div>
                        <input
                            type="text"
                            id="destination-action1"
                            placeholder="Example: Complete business management or teaching credential program"
                            aria-label="Action step 1"
                            data-section="destination"
                        />
                    </div>
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">2</div>
                        <input
                            type="text"
                            id="destination-action2"
                            placeholder="Example: Build financial foundation and business/teaching skills"
                            aria-label="Action step 2"
                            data-section="destination"
                        />
                    </div>
                    <div class="action-step">
                        <div class="action-step-number" aria-hidden="true">3</div>
                        <input
                            type="text"
                            id="destination-action3"
                            placeholder="Example: Develop leadership presence in dental community"
                            aria-label="Action step 3"
                            data-section="destination"
                        />
                    </div>
                </div>
            </div>

            <div class="two-column">
                <div class="form-group">
                    <label for="destination-resources">Resources and support needed</label>
                    <textarea
                        id="destination-resources"
                        placeholder="Example: Business loans/investors, teaching certification, mentors who have achieved similar goals..."
                        data-section="destination"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="destination-obstacles">Potential obstacles and solutions</label>
                    <textarea
                        id="destination-obstacles"
                        placeholder="Example: High startup costs - solution: save consistently, seek partnerships, explore grant opportunities..."
                        data-section="destination"
                    ></textarea>
                </div>
            </div>
        </section>

        <!-- Action Buttons -->
        <div class="action-buttons" role="group" aria-label="Roadmap actions">
            <button type="button" class="btn btn-primary" id="exportPdfBtn" aria-label="Export roadmap as PDF">
                <span aria-hidden="true">&#x1F4C4;</span>
                Export as PDF
            </button>
            <button type="button" class="btn btn-secondary" id="exportTextBtn" aria-label="Export roadmap as text file">
                <span aria-hidden="true">&#x1F4DD;</span>
                Export as Text
            </button>
            <button type="button" class="btn btn-outline" id="clearBtn" aria-label="Clear all data">
                <span aria-hidden="true">&#x1F5D1;</span>
                Clear Roadmap
            </button>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmModal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Clear Your Roadmap?</h2>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to clear all your roadmap data? This action cannot be undone.</p>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-outline" id="cancelBtn">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmClearBtn">Yes, Clear Everything</button>
            </div>
        </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" id="successMessage" role="alert" aria-live="polite">
        <span aria-hidden="true">&#x2714;</span>
        <span id="successText">Saved!</span>
    </div>

    <!-- Auto-save Indicator -->
    <div class="autosave-indicator" id="autosaveIndicator" role="status" aria-live="polite">
        <span aria-hidden="true">&#x1F4BE;</span> Auto-saved
    </div>

    <script>
        // Constants
        const STORAGE_KEY = 'dac300:v1:tx-rda:w2:roadmap-builder';
        const AUTOSAVE_DELAY = 1000;

        // State
        let autosaveTimer = null;
        let roadmapData = loadData();

        // Elements
        const progressFill = document.getElementById('progressFill');
        const progressPercentage = document.getElementById('progressPercentage');
        const roadmapProgress = document.getElementById('roadmapProgress');
        const successMessage = document.getElementById('successMessage');
        const successText = document.getElementById('successText');
        const autosaveIndicator = document.getElementById('autosaveIndicator');
        const confirmModal = document.getElementById('confirmModal');

        // Get all input elements
        const allInputs = document.querySelectorAll('input[type="text"], textarea');
        const sections = ['start', 'mile1', 'mile2', 'mile3', 'destination'];

        // Initialize
        function init() {
            loadFormData();
            updateProgress();
            attachEventListeners();
            postHeight();
        }

        // Load data from localStorage
        function loadData() {
            try {
                const data = localStorage.getItem(STORAGE_KEY);
                return data ? JSON.parse(data) : {};
            } catch (e) {
                console.error('Error loading data:', e);
                return {};
            }
        }

        // Save data to localStorage
        function saveData() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(roadmapData));
                showAutosaveIndicator();
            } catch (e) {
                console.error('Error saving data:', e);
            }
        }

        // Load form data into inputs
        function loadFormData() {
            allInputs.forEach(input => {
                const id = input.id;
                if (roadmapData[id]) {
                    input.value = roadmapData[id];
                }
            });
        }

        // Attach event listeners
        function attachEventListeners() {
            // Auto-save on input
            allInputs.forEach(input => {
                input.addEventListener('input', handleInput);
                input.addEventListener('blur', () => {
                    if (autosaveTimer) {
                        clearTimeout(autosaveTimer);
                        autosaveTimer = null;
                    }
                    saveData();
                    updateProgress();
                });
            });

            // Button events
            document.getElementById('exportPdfBtn').addEventListener('click', exportAsPDF);
            document.getElementById('exportTextBtn').addEventListener('click', exportAsText);
            document.getElementById('clearBtn').addEventListener('click', showClearModal);
            document.getElementById('cancelBtn').addEventListener('click', hideClearModal);
            document.getElementById('confirmClearBtn').addEventListener('click', clearAllData);

            // Close modal on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && confirmModal.classList.contains('active')) {
                    hideClearModal();
                }
            });

            // Close modal on backdrop click
            confirmModal.addEventListener('click', (e) => {
                if (e.target === confirmModal) {
                    hideClearModal();
                }
            });
        }

        // Handle input changes
        function handleInput(e) {
            const input = e.target;
            roadmapData[input.id] = input.value;

            // Debounced auto-save
            if (autosaveTimer) {
                clearTimeout(autosaveTimer);
            }
            autosaveTimer = setTimeout(() => {
                saveData();
                updateProgress();
            }, AUTOSAVE_DELAY);
        }

        // Calculate completion percentage
        function calculateCompletion() {
            const requiredFields = Array.from(allInputs).filter(input =>
                input.hasAttribute('aria-required') || input.closest('[data-section]')
            );

            const completedFields = requiredFields.filter(input =>
                input.value.trim() !== ''
            );

            return Math.round((completedFields.length / requiredFields.length) * 100);
        }

        // Update progress indicators
        function updateProgress() {
            const percentage = calculateCompletion();

            // Update progress bar
            progressFill.style.width = percentage + '%';
            progressPercentage.textContent = percentage + '%';
            progressFill.parentElement.setAttribute('aria-valuenow', percentage);

            // Update roadmap line
            roadmapProgress.style.width = percentage + '%';

            // Update section completion
            sections.forEach((section, index) => {
                const sectionElement = document.getElementById(`section-${section}`);
                const sectionInputs = sectionElement.querySelectorAll('input[type="text"], textarea');
                const requiredInputs = Array.from(sectionInputs).filter(input =>
                    input.hasAttribute('aria-required')
                );

                const completed = requiredInputs.every(input => input.value.trim() !== '');
                const hasAnyContent = Array.from(sectionInputs).some(input => input.value.trim() !== '');

                const marker = document.getElementById(`marker-${section}`);
                const milestone = marker.closest('.milestone');
                const label = milestone.querySelector('.milestone-label');

                // Update marker state
                marker.classList.remove('completed', 'active');
                label.classList.remove('completed', 'active');
                sectionElement.classList.remove('completed', 'active');

                if (completed) {
                    marker.classList.add('completed');
                    label.classList.add('completed');
                    sectionElement.classList.add('completed');
                } else if (hasAnyContent) {
                    marker.classList.add('active');
                    label.classList.add('active');
                    sectionElement.classList.add('active');
                }
            });

            postHeight();
        }

        // Show auto-save indicator
        function showAutosaveIndicator() {
            autosaveIndicator.classList.add('active');
            setTimeout(() => {
                autosaveIndicator.classList.remove('active');
            }, 2000);
        }

        // Show success message
        function showSuccess(message) {
            successText.textContent = message;
            successMessage.classList.add('active');
            setTimeout(() => {
                successMessage.classList.remove('active');
            }, 3000);
        }

        // CHCP Logo as base64
        const CHCP_LOGO = 'data:image/png;base64,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';

        // Export as PDF using pdf-lib
        function exportAsPDF() {
            // Load pdf-lib dynamically if not already loaded
            if (typeof window.PDFLib === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js';
                script.onload = () => generatePDF();
                script.onerror = () => {
                    alert('Could not load PDF library. Please try Export as Text instead.');
                };
                document.head.appendChild(script);
            } else {
                generatePDF();
            }
        }

        async function generatePDF() {
            const { PDFDocument, rgb, StandardFonts } = window.PDFLib;
            const pdfDoc = await PDFDocument.create();

            // A4 page size in points
            const pageWidth = 595.28;
            const pageHeight = 841.89;
            const margin = 20;
            const contentWidth = pageWidth - (margin * 2);
            let currentPage = pdfDoc.addPage([pageWidth, pageHeight]);
            let y = pageHeight - 50; // Start from top with padding

            // Load fonts
            const fontBold = await pdfDoc.embedFont(StandardFonts.HelveticaBold);
            const fontNormal = await pdfDoc.embedFont(StandardFonts.Helvetica);

            // Colors (rgb values 0-1)
            const colors = {
                primary: rgb(1/255, 84/255, 158/255),      // #01549e
                secondary: rgb(211/255, 92/255, 55/255),   // #d35c37
                text: rgb(51/255, 51/255, 51/255),         // #333
                muted: rgb(100/255, 116/255, 139/255),     // #64748b
                light: rgb(226/255, 232/255, 240/255)      // #e2e8f0
            };

            // Helper: Check for page break
            function checkPageBreak(neededSpace) {
                if (y - neededSpace < 25) {
                    currentPage = pdfDoc.addPage([pageWidth, pageHeight]);
                    y = pageHeight - 25;
                    return true;
                }
                return false;
            }

            // Helper: Wrap text to fit width
            function wrapText(text, font, fontSize, maxWidth) {
                const words = text.split(' ');
                const lines = [];
                let currentLine = '';

                words.forEach(word => {
                    const testLine = currentLine ? currentLine + ' ' + word : word;
                    const testWidth = font.widthOfTextAtSize(testLine, fontSize);

                    if (testWidth > maxWidth && currentLine) {
                        lines.push(currentLine);
                        currentLine = word;
                    } else {
                        currentLine = testLine;
                    }
                });

                if (currentLine) {
                    lines.push(currentLine);
                }

                return lines;
            }

            // Helper: Draw wrapped text
            function addWrappedText(text, x, fontSize, font, color, maxWidth) {
                const lines = wrapText(text, font, fontSize, maxWidth || contentWidth);
                const lineHeight = fontSize * 1.2;

                lines.forEach(line => {
                    checkPageBreak(lineHeight + 2);
                    currentPage.drawText(line, {
                        x: x,
                        y: y,
                        size: fontSize,
                        font: font,
                        color: color
                    });
                    y -= lineHeight;
                });
                return y;
            }

            // Helper: Draw section header
            function drawSectionHeader(icon, title, subtitle) {
                checkPageBreak(40);

                // Title - orange
                currentPage.drawText(title, {
                    x: margin,
                    y: y,
                    size: 14,
                    font: fontBold,
                    color: colors.secondary
                });
                y -= 16;

                // Subtitle
                currentPage.drawText(subtitle, {
                    x: margin,
                    y: y,
                    size: 9,
                    font: fontNormal,
                    color: colors.muted
                });
                y -= 8;

                // Thin horizontal rule - light gray
                currentPage.drawLine({
                    start: { x: margin, y: y },
                    end: { x: pageWidth - margin, y: y },
                    thickness: 0.5,
                    color: rgb(200/255, 200/255, 200/255)
                });
                y -= 15;
            }

            // Helper: Draw field label and content
            function drawField(label, content, indent = 0) {
                if (!content || !content.trim()) return;

                checkPageBreak(25);

                // Label
                currentPage.drawText(label, {
                    x: margin + indent,
                    y: y,
                    size: 10,
                    font: fontBold,
                    color: colors.primary
                });
                y -= 14;

                // Content
                addWrappedText(content.trim(), margin + indent, 10, fontNormal, colors.text, contentWidth - indent);
                y -= 12;
            }

            // Helper: Draw numbered list
            function drawNumberedList(title, items, indent = 0) {
                if (!items || items.length === 0) return;

                checkPageBreak(15);

                // Title
                currentPage.drawText(title, {
                    x: margin + indent,
                    y: y,
                    size: 10,
                    font: fontBold,
                    color: colors.primary
                });
                y -= 15;

                items.forEach((item, index) => {
                    if (!item.trim()) return;
                    checkPageBreak(15);

                    const numberText = `${index + 1}. `;
                    const lines = wrapText(item.trim(), fontNormal, 10, contentWidth - indent - 15);

                    lines.forEach((line, lineIndex) => {
                        if (lineIndex > 0) checkPageBreak(12);

                        if (lineIndex === 0) {
                            currentPage.drawText(numberText + line, {
                                x: margin + indent,
                                y: y,
                                size: 10,
                                font: fontNormal,
                                color: colors.text
                            });
                        } else {
                            currentPage.drawText(line, {
                                x: margin + indent + 15,
                                y: y,
                                size: 10,
                                font: fontNormal,
                                color: colors.text
                            });
                        }
                        y -= 12;
                    });
                    y -= 3;
                });
                y -= 5;
            }

            // === HEADER ===
            // Add logo on right
            try {
                const base64Data = CHCP_LOGO.split(',')[1];
                const imageBytes = Uint8Array.from(atob(base64Data), c => c.charCodeAt(0));
                const logoImage = await pdfDoc.embedPng(imageBytes);

                const logoWidth = 50;
                const logoHeight = logoWidth / (logoImage.width / logoImage.height);
                const logoX = pageWidth - margin - logoWidth;
                const logoY = pageHeight - 50 - logoHeight;

                currentPage.drawImage(logoImage, {
                    x: logoX,
                    y: logoY,
                    width: logoWidth,
                    height: logoHeight
                });
            } catch (e) {
                console.error('Error adding logo:', e);
            }

            // Title - left aligned
            currentPage.drawText('My Career Roadmap', {
                x: margin,
                y: y,
                size: 24,
                font: fontBold,
                color: colors.primary
            });
            y -= 22;

            // Subtitle
            currentPage.drawText('RDA Journey - Career Planning', {
                x: margin,
                y: y,
                size: 12,
                font: fontNormal,
                color: colors.muted
            });
            y -= 25;

            // Header line
            currentPage.drawLine({
                start: { x: margin, y: y },
                end: { x: pageWidth - margin, y: y },
                thickness: 1.5,
                color: colors.primary
            });
            y -= 18;

            // Progress info
            const percentage = calculateCompletion();
            currentPage.drawText('Progress: ', {
                x: margin,
                y: y,
                size: 10,
                font: fontNormal,
                color: colors.muted
            });
            currentPage.drawText(percentage + '% Complete', {
                x: margin + 45,
                y: y,
                size: 10,
                font: fontBold,
                color: colors.secondary
            });
            y -= 20;

            // === SECTIONS ===
            const sectionData = {
                start: { icon: 'START', title: 'Starting Point', subtitle: 'Where you are today' },
                mile1: { icon: '1', title: 'Mile Marker 1: 3 Months', subtitle: 'RDA certification and immediate goals' },
                mile2: { icon: '2', title: 'Mile Marker 2: 1 Year', subtitle: 'First job and gaining experience' },
                mile3: { icon: '3', title: 'Mile Marker 3: 3 Years', subtitle: 'Career development and specialization' },
                destination: { icon: 'GOAL', title: 'Destination: 5+ Years', subtitle: 'Your long-term vision' }
            };

            sections.forEach(section => {
                const sectionElement = document.getElementById(`section-${section}`);
                const inputs = sectionElement.querySelectorAll('input[type="text"], textarea');
                const info = sectionData[section];

                // Check if section has any content
                let hasContent = false;
                inputs.forEach(input => {
                    if (input.value.trim()) hasContent = true;
                });

                if (!hasContent) return;

                // Section header
                drawSectionHeader(info.icon, info.title, info.subtitle);

                let actionSteps = [];
                let resourcesText = '';
                let obstaclesText = '';

                inputs.forEach(input => {
                    const label = sectionElement.querySelector(`label[for="${input.id}"]`);

                    if (input.id.includes('-action')) {
                        if (input.value.trim()) {
                            actionSteps.push(input.value.trim());
                        }
                    } else if (input.id.includes('-resources') && input.value.trim()) {
                        resourcesText = input.value.trim();
                    } else if (input.id.includes('-obstacles') && input.value.trim()) {
                        obstaclesText = input.value.trim();
                    } else if (label && input.value.trim()) {
                        const labelText = label.textContent.replace('*', '').trim();
                        drawField(labelText, input.value.trim());
                    }
                });

                // Action steps as numbered list
                if (actionSteps.length > 0) {
                    drawNumberedList('Action Steps', actionSteps);
                }

                // Resources and obstacles
                if (resourcesText) {
                    drawField('Resources & Support Needed', resourcesText);
                }
                if (obstaclesText) {
                    drawField('Potential Obstacles & Solutions', obstaclesText);
                }

                y -= 10;
            });

            // === FOOTER ===
            checkPageBreak(25);
            y -= 8;
            currentPage.drawLine({
                start: { x: margin, y: y },
                end: { x: pageWidth - margin, y: y },
                thickness: 0.5,
                color: colors.light
            });
            y -= 15;

            const dateText = 'Generated: ' + new Date().toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            currentPage.drawText(dateText, {
                x: margin,
                y: y,
                size: 9,
                font: fontNormal,
                color: colors.muted
            });

            const orgText = 'The College of Health Care Professions';
            const orgTextWidth = fontNormal.widthOfTextAtSize(orgText, 9);
            currentPage.drawText(orgText, {
                x: pageWidth - margin - orgTextWidth,
                y: y,
                size: 9,
                font: fontNormal,
                color: colors.muted
            });

            // Save PDF
            const pdfBytes = await pdfDoc.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'my-career-roadmap.pdf';
            link.click();
            URL.revokeObjectURL(url);

            showSuccess('PDF downloaded!');
        }

        // Export as text file
        function exportAsText() {
            const content = generateTextExport();
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'my-career-roadmap.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showSuccess('Roadmap exported as text file!');
        }

        // Generate text export content
        function generateTextExport() {
            let text = '================================\n';
            text += 'MY CAREER ROADMAP\n';
            text += 'RDA Journey - Career Planning\n';
            text += '================================\n\n';

            const sectionTitles = {
                start: 'STARTING POINT - Where I Am Today',
                mile1: 'MILE MARKER 1: 3 MONTHS - RDA Certification',
                mile2: 'MILE MARKER 2: 1 YEAR - First Job & Experience',
                mile3: 'MILE MARKER 3: 3 YEARS - Career Development',
                destination: 'DESTINATION: 5+ YEARS - Long-Term Vision'
            };

            sections.forEach(section => {
                text += '\n' + '='.repeat(50) + '\n';
                text += sectionTitles[section] + '\n';
                text += '='.repeat(50) + '\n\n';

                const sectionElement = document.getElementById(`section-${section}`);
                const inputs = sectionElement.querySelectorAll('input[type="text"], textarea');
                let actionSteps = [];
                let resourcesText = '';
                let obstaclesText = '';
                let goalText = '';

                inputs.forEach(input => {
                    const label = sectionElement.querySelector(`label[for="${input.id}"]`);

                    // Check if this is an action step (uses aria-label instead of label element)
                    if (input.id.includes('-action')) {
                        if (input.value.trim()) {
                            const stepNum = input.id.slice(-1);
                            actionSteps.push(`${stepNum}. ${input.value.trim()}`);
                        }
                    } else if (input.id.includes('-resources') && input.value.trim()) {
                        resourcesText = input.value.trim();
                    } else if (input.id.includes('-obstacles') && input.value.trim()) {
                        obstaclesText = input.value.trim();
                    } else if (label && input.value.trim()) {
                        const labelText = label.textContent.replace('*', '').trim();
                        text += labelText + '\n';
                        text += '-'.repeat(labelText.length) + '\n';
                        text += input.value.trim() + '\n\n';
                    }
                });

                // Add action steps after goals
                if (actionSteps.length > 0) {
                    text += 'Action Steps\n';
                    text += '-'.repeat(12) + '\n';
                    text += actionSteps.join('\n') + '\n\n';
                }

                // Add resources
                if (resourcesText) {
                    text += 'Resources and Support Needed\n';
                    text += '-'.repeat(28) + '\n';
                    text += resourcesText + '\n\n';
                }

                // Add obstacles
                if (obstaclesText) {
                    text += 'Potential Obstacles and Solutions\n';
                    text += '-'.repeat(34) + '\n';
                    text += obstaclesText + '\n\n';
                }
            });

            text += '\n' + '='.repeat(50) + '\n';
            text += 'Generated: ' + new Date().toLocaleString() + '\n';
            text += '='.repeat(50) + '\n';

            return text;
        }

        // Show clear confirmation modal
        function showClearModal() {
            confirmModal.classList.add('active');
            document.getElementById('confirmClearBtn').focus();
        }

        // Hide clear confirmation modal
        function hideClearModal() {
            confirmModal.classList.remove('active');
            document.getElementById('clearBtn').focus();
        }

        // Clear all data
        function clearAllData() {
            roadmapData = {};
            localStorage.removeItem(STORAGE_KEY);

            allInputs.forEach(input => {
                input.value = '';
            });

            updateProgress();
            hideClearModal();
            showSuccess('Roadmap cleared successfully!');
        }

        // Post height to parent iframe
        function postHeight() {
            if (window.parent !== window) {
                const height = Math.max(
                    document.body.scrollHeight,
                    document.documentElement.scrollHeight,
                    1600
                );
                window.parent.postMessage({ type: 'resize', height: height }, '*');
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);

        // Update height on window resize
        window.addEventListener('resize', postHeight);
    </script>
</body>
</html>